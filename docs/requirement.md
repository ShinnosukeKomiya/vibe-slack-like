# ChatConnect 要件定義書（改訂版）

## 1. システムの目的
ChatConnect は、小規模チーム向けに **Slack ライクな最小構成チャットアプリ** を自作・学習するためのサンプル実装である。
チャンネル構造、スレッド返信などチャット基盤のコア概念を体験できることを主目的とする。

---

## 2. ステークホルダと役割

| ステークホルダ            | 役割・目的                                      |
| ------------------------- | ----------------------------------------------- |
| **ワークスペース管理者**  | チーム用ワークスペースを作成し設定を行う         |
| **一般メンバー**          | チャンネル参加・メッセージ送信・スレッド返信     |
| **ゲスト**               | 限定チャンネルのみ閲覧・投稿（オプション実装） |

---

## 3. ユースケース一覧

| No.  | 分類              | ユースケース名                            | アクター                              | 概要                                                                                 |
| ---- | ----------------- | ----------------------------------------- | ------------------------------------- | ------------------------------------------------------------------------------------ |
| UC‑1 | ワークスペース    | ワークスペースを作成・設定する            | ワークスペース管理者                  | チーム名を登録し、招待リンク（URL）を発行。参加ユーザーを一覧・削除可能。 |
| UC‑2 | チャンネル管理    | チャンネルを新規作成・編集・削除する      | ワークスペース管理者／一般メンバー    | 公開/非公開を選択し、目的と説明を設定。不要になったチャンネルはアーカイブ。        |
| UC‑3 | メッセージ投稿    | テキストメッセージを送信・編集・削除する  | 一般メンバー／ゲスト（任意）          | メッセージを投稿し、必要に応じて編集・削除。Markdown ライクな書式に対応。           |
| UC‑4 | スレッド返信      | 既存メッセージにスレッドで返信する        | 一般メンバー                          | 任意のメッセージを起点にツリー状の会話を開始・閲覧。スレッド単位で既読状態を管理。 |

---

## 4. 機能要件

### UC‑1 ワークスペースを作成・設定する

| 番号   | 要件名                     | 詳細・受入れ基準 | 優先度 |
| ------ | -------------------------- | --------------- | ------ |
| FR‑1‑1 | ワークスペース作成         | チーム名を入力し作成できる。 | Must |
| FR‑1‑2 | 招待リンク発行             | URL をコピーし他ユーザーに共有できる。リンク経由で参加したユーザーは自動でメンバー登録される。 | Must |
| FR‑1‑3 | メンバー一覧・削除         | 管理者はメンバーを一覧表示し、任意ユーザーをキックできる。 | Should |

### UC‑2 チャンネルを新規作成・編集・削除する

| 番号   | 要件名                     | 詳細・受入れ基準 | 優先度 |
| ------ | -------------------------- | --------------- | ------ |
| FR‑2‑1 | チャンネル作成             | 名前（必須）、公開/非公開フラグ、説明を入力し作成できる。 | Must |
| FR‑2‑2 | 編集・アーカイブ           | 作成者または管理者は名前・説明を変更、もしくはチャンネルをアーカイブできる。 | Must |
| FR‑2‑3 | チャンネル一覧・検索       | 参加可能なチャンネルをリストし、キーワードでフィルタできる。 | Should |

### UC‑3 テキストメッセージを送信・編集・削除する

| 番号   | 要件名                     | 詳細・受入れ基準 | 優先度 |
| ------ | -------------------------- | --------------- | ------ |
| FR‑3‑1 | メッセージ送信             | 入力欄にテキストを入力して Enter で送信。全参加者へリアルタイム配信。 | Must |
| FR‑3‑2 | メッセージ編集             | 送信後 30 分以内は本人が内容を編集できる。編集履歴はメッセージ下部に “(edited)” 表示。 | Should |
| FR‑3‑3 | メッセージ削除             | 送信者または管理者はメッセージを削除できる。削除後は “このメッセージは削除されました” と表示。 | Must |
| FR‑3‑4 | Markdown ライク書式        | **\***太字\***、\_斜体\_, \`コード\` 等の簡易フォーマットをレンダリングする。 | Should |

### UC‑4 スレッドで返信する

| 番号   | 要件名                     | 詳細・受入れ基準 | 優先度 |
| ------ | -------------------------- | --------------- | ------ |
| FR‑4‑1 | スレッド開始               | 任意のメッセージに「返信」ボタンを押すとスレッドビューが開き、1 件目の返信を投稿できる。 | Must |
| FR‑4‑2 | スレッド表示               | スレッドが存在する場合、元メッセージに返信件数バッジを表示。クリックでサイドパネルに会話ツリーを展開。 | Must |
| FR‑4‑3 | スレッド返信編集・削除     | スレッド内でも FR‑3‑2／3 と同じルールで編集・削除が可能。 | Should |
